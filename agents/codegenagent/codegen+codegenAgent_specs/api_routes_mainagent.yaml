# ==============================
# L9 Codegen Spec: API Endpoint
# ==============================

filename: api/routes/mainagent.py
type: api_route
language: python

description: |
  FastAPI route for L9 MainAgent v6 orchestration.
  Accepts packets, applies multimodal reasoning, emits structured results.

wiring:
  route: POST /api/mainagent/v6/packet
  dependencies:
    - FastAPI
    - PacketEnvelope
    - MainAgentV6
  # === PATCH: router registration ===
  router_registration:
    add_to: api/server.py
    import_statement: from api.routes import mainagent as mainagent_router
    include_call: app.include_router(mainagent_router.router)

code: |
  from fastapi import APIRouter, Request
  from agents.mainagent_v6.mainagent import MainAgentV6
  from core.schemas.packet_envelope import PacketEnvelope

  router = APIRouter()
  agent = MainAgentV6(...)

  @router.post("/api/mainagent/v6/packet")
  async def process(packet: PacketEnvelope, request: Request):
      result = await agent.handle_packet(packet)
      return {"result": result}
# ============================================================================
# L9 DORA BLOCK - AUTO-GENERATED - DO NOT EDIT
# ============================================================================
l9_dora:
  component_id: "AGE-INTE-025"
  component_name: "Api Routes Mainagent"
  module_version: "1.0.0"
  created_at: "2026-01-08T03:17:26Z"
  created_by: "L9_DORA_Injector"
  layer: "intelligence"
  domain: "agent_execution"
  type: "config"
  status: "active"
  governance_level: "critical"
  compliance_required: true
  audit_trail: true
  purpose: "Configuration file for api routes mainagent"
  dependencies: []
# ============================================================================
# END L9 DORA BLOCK
# ============================================================================
