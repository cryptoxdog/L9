# ============================
# Patch Audit Viewer (UI API)
# ============================

filename: ui/patch_audit_viewer.py
type: ui_module
language: python

description: |
  Displays all recent patches, prompt diffs, kernel overrides, and rollback states.
  Can be queried via API or used as a frontend module in L9â€™s cockpit.

wiring:
  source: patch_audit_log.yaml
  routes:
    - GET /api/patches
    - GET /api/patch/{agent_id}
  outputs:
    - JSON audit feeds
    - diff previews

code: |
  from fastapi import APIRouter

  router = APIRouter()

  @router.get("/api/patches")
  def list_patches():
      import os
      return os.listdir("patch_audit/")

  @router.get("/api/patch/{agent_id}")
  def get_patch(agent_id: str):
      path = f"patch_audit/{agent_id}_patch.yaml"
      with open(path) as f:
          return {"patch": f.read()}
# ============================================================================
# L9 DORA BLOCK - AUTO-GENERATED - DO NOT EDIT
# ============================================================================
l9_dora:
  component_id: "AGE-INTE-100"
  component_name: "Ui Patch Audit Viewer"
  module_version: "1.0.0"
  created_at: "2026-01-08T03:17:26Z"
  created_by: "L9_DORA_Injector"
  layer: "intelligence"
  domain: "agent_execution"
  type: "config"
  status: "active"
  governance_level: "critical"
  compliance_required: true
  audit_trail: true
  purpose: "Configuration file for ui patch audit viewer"
  dependencies: []
# ============================================================================
# END L9 DORA BLOCK
# ============================================================================
