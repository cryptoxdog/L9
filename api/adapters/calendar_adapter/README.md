# Calendar Adapter

> Syncs with Google/Outlook calendars, creates/updates events, and notifies AIOS of scheduling changes.

**Module ID:** `calendar.adapter`  
**Tier:** 1  
**Spec Version:** 2.6.0  
**Spec Hash:** `SPEC-447dc3be62b3`  
**Generated:** 2025-12-18T06:25:16.899340+00:00

---

## Overview

This module was auto-generated from `Module-Spec-v2.6-calendar_adapter.yaml`.

### Responsibilities

- Syncs with Google/Outlook calendars, creates/updates events, and notifies AIOS of scheduling changes.
- Integrate with L9 memory substrate
- Emit standardized packets (calendar_adapter.*)

### Non-Goals

- No new database tables
- No new migrations
- No parallel memory/logging systems

---

## API Endpoints

### Inbound

| Endpoint | Method | Auth |
|----------|--------|------|
| `/calendar/webhook` | POST | bearer |


### Outbound Dependencies

| Service | Endpoint | Timeout |
|---------|----------|--------|
| aios_runtime_call | `/chat` | 30s |
| memory_service_call | `/memory/ingest` | 30s |
| google_calendar_events_list | `https://api.google.com/...` | 10s |
| google_calendar_events_insert | `https://api.google.com/...` | 10s |
| google_calendar_events_update | `https://api.google.com/...` | 10s |
| google_calendar_events_delete | `https://api.google.com/...` | 10s |


---

## Packet Contract

This module emits the following packet types:

| Packet Type | Trigger |
|------------|---------|
| `calendar_adapter.in` | On valid request received |
| `calendar_adapter.out` | On successful processing |
| `calendar_adapter.error` | On error |

---

## Idempotency

- **Pattern:** `event_id`
- **Source:** `google_event_id`
- **Behavior:** Duplicate requests return cached response without re-processing

---

## Configuration

Required environment variables:

| Variable | Description |
|----------|-------------|
| `GOOGLE_CALENDAR_API_KEY` | Required |
| `GOOGLE_CALENDAR_WEBHOOK_SECRET` | Required |

Optional:

| `CALENDAR_ADAPTER_ENABLED` | Optional |
| `CALENDAR_ADAPTER_LOG_LEVEL` | Optional |
| `CALENDAR_SYNC_INTERVAL_MINUTES` | Optional |

---

## Testing

### Run Tests

```bash
pytest tests/ -v
```

### Acceptance Criteria

**Positive:**
- [ ] valid_event_processed
- [ ] idempotent_replay_cached
- [ ] event_created_successfully
- [ ] event_updated_successfully
- [ ] aios_response_forwarded
- [ ] packet_written_on_success

**Negative:**
- [ ] invalid_auth_rejected
- [ ] duplicate_event_deduped

---

## File Structure

```
calendar_adapter/
├── README.md              # This file
├── __init__.py            # Package init
├── config.py              # Configuration
├── schemas.py             # Pydantic schemas
├── adapters/
│   └── calendar_adapter_adapter.py
├── routes/
│   └── calendar_adapter.py
├── clients/
│   └── calendar_adapter_client.py
├── services/
│   └── calendar_adapter_service.py
└── tests/
    ├── conftest.py
    ├── test_calendar_adapter.py
    └── test_calendar_adapter_integration.py
```

---

*Auto-generated by L9 Module Pipeline v2.0*

---

<!-- Generated from Module-Spec v2.6 -->
<!-- module_id: calendar.adapter -->
<!-- enforced_acceptance: ['valid_event_processed', 'idempotent_replay_cached', 'event_created_successfully', 'event_updated_successfully', 'aios_response_forwarded', 'packet_written_on_success', 'invalid_auth_rejected', 'duplicate_event_deduped'] -->

<!-- DORA META BLOCK — DO NOT EDIT MANUALLY (CI-owned) -->
<!--
meta:
  template_version: "2.6.0"
  spec_hash: "SPEC-447dc3be62b3"
  created_at: "2025-12-18T06:25:16.899340+00:00"
  created_by: module_pipeline
  last_updated_at: "2025-12-18T06:25:16.899340+00:00"
  last_updated_by: module_pipeline
  module_id: "calendar.adapter"
  file: "README.md"
-->
