# Twilio Adapter

> Receives Twilio SMS/voice webhooks, validates signatures, and routes to AIOS for processing. Supports outbound messaging via Twilio API.

**Module ID:** `twilio.adapter`  
**Tier:** 1  
**Spec Version:** 2.6.0  
**Spec Hash:** `SPEC-102d1d3dc34c`  
**Generated:** 2025-12-18T06:25:01.645626+00:00

---

## Overview

This module was auto-generated from `Module-Spec-v2.6-twilio_adapter.yaml`.

### Responsibilities

- Receives Twilio SMS/voice webhooks, validates signatures, and routes to AIOS for processing. Supports outbound messaging via Twilio API.
- Integrate with L9 memory substrate
- Emit standardized packets (twilio_adapter.*)

### Non-Goals

- No new database tables
- No new migrations
- No parallel memory/logging systems

---

## API Endpoints

### Inbound

| Endpoint | Method | Auth |
|----------|--------|------|
| `/twilio/webhook` | POST | hmac-sha256 |


### Outbound Dependencies

| Service | Endpoint | Timeout |
|---------|----------|--------|
| aios_runtime_call | `/chat` | 30s |
| memory_service_call | `/memory/ingest` | 30s |
| twilio_messages_create | `https://api.twilio.com/...` | 10s |
| twilio_calls_create | `https://api.twilio.com/...` | 10s |


---

## Packet Contract

This module emits the following packet types:

| Packet Type | Trigger |
|------------|---------|
| `twilio_adapter.in` | On valid request received |
| `twilio_adapter.out` | On successful processing |
| `twilio_adapter.error` | On error |

---

## Idempotency

- **Pattern:** `event_id`
- **Source:** `message_sid`
- **Behavior:** Duplicate requests return cached response without re-processing

---

## Configuration

Required environment variables:

| Variable | Description |
|----------|-------------|
| `TWILIO_ACCOUNT_SID` | Required |
| `TWILIO_AUTH_TOKEN` | Required |
| `TWILIO_PHONE_NUMBER` | Required |

Optional:

| `TWILIO_ADAPTER_ENABLED` | Optional |
| `TWILIO_ADAPTER_LOG_LEVEL` | Optional |

---

## Testing

### Run Tests

```bash
pytest tests/ -v
```

### Acceptance Criteria

**Positive:**
- [ ] valid_sms_processed
- [ ] idempotent_replay_cached
- [ ] signature_validated
- [ ] aios_response_forwarded
- [ ] packet_written_on_success
- [ ] outbound_sms_sent

**Negative:**
- [ ] invalid_signature_rejected
- [ ] duplicate_message_deduped

---

## File Structure

```
twilio_adapter/
├── README.md              # This file
├── __init__.py            # Package init
├── config.py              # Configuration
├── schemas.py             # Pydantic schemas
├── adapters/
│   └── twilio_adapter_adapter.py
├── routes/
│   └── twilio_adapter.py
├── clients/
│   └── twilio_adapter_client.py
├── services/
│   └── twilio_adapter_service.py
└── tests/
    ├── conftest.py
    ├── test_twilio_adapter.py
    └── test_twilio_adapter_integration.py
```

---

*Auto-generated by L9 Module Pipeline v2.0*

---

<!-- Generated from Module-Spec v2.6 -->
<!-- module_id: twilio.adapter -->
<!-- enforced_acceptance: ['valid_sms_processed', 'idempotent_replay_cached', 'signature_validated', 'aios_response_forwarded', 'packet_written_on_success', 'outbound_sms_sent', 'invalid_signature_rejected', 'duplicate_message_deduped'] -->

<!-- DORA META BLOCK — DO NOT EDIT MANUALLY (CI-owned) -->
<!--
meta:
  template_version: "2.6.0"
  spec_hash: "SPEC-102d1d3dc34c"
  created_at: "2025-12-18T06:25:01.645626+00:00"
  created_by: module_pipeline
  last_updated_at: "2025-12-18T06:25:01.645626+00:00"
  last_updated_by: module_pipeline
  module_id: "twilio.adapter"
  file: "README.md"
-->

---

## L9 DORA BLOCK - AUTO-GENERATED - DO NOT EDIT

| Field | Value |
|-------|-------|
| **Component ID** | API-OPER-009 |
| **Component Name** | Readme |
| **Module Version** | 1.0.0 |
| **Created At** | 2026-01-08T03:17:26Z |
| **Created By** | L9_DORA_Injector |
| **Layer** | operations |
| **Domain** | api_gateway |
| **Type** | schema |
| **Status** | active |
| **Governance Level** | medium |
| **Compliance Required** | True |
| **Audit Trail** | True |
| **Purpose** | Documentation for README |

---
