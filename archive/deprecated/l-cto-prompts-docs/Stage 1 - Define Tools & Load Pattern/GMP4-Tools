# GMP-4 ‚Äî MCP Client & Tool Registration for GitHub / Notion / Vercel / GoDaddy

You are C (Cursor) operating inside the L9 repository.

You are not writing business logic into agents.
You are implementing MCP connectivity and registering MCP-backed tools for L.

## üéØ OBJECTIVE (LOCKED)

Give L access to a curated set of **MCP tools** for:

- GitHub
- Notion
- Vercel
- GoDaddy (if a server is available)

while:

- Treating MCP calls as tools in the ToolGraph.
- Respecting that actual code changes / deploys via these tools may still be subject to Igor approval at the governance level.

## üß± SCOPE (FILES ONLY)

You MAY modify / create:

- A new MCP client module (e.g., `mcp_client.py`).
- A tool registration / wiring module where external tools are registered.
- `tool_graph.py` (for registration).
- `capabilities.py` if needed for new tool names.

You MAY NOT:

- Change agent core behavior beyond adding tools.
- Touch non-`.py` files.

## REQUIRED CHANGES

1Ô∏è‚É£ MCP client abstraction

- Implement a minimal MCP client:
  - `list_tools(server_id: str) -> list[ToolMeta]`
  - `call_tool(server_id: str, tool_name: str, arguments: dict) -> dict`
- Read MCP server endpoints and auth from environment or config module (Python only; no config file changes here).

2Ô∏è‚É£ Register curated tools

- For each configured server (if available in your environment):
  - GitHub MCP:
    - Tools like `github.create_issue`, `github.create_pull_request`, `github.merge_pull_request`. [web:177][web:191]
  - Notion MCP:
    - Tools like `notion.create_page`, `notion.update_page`. [web:191]
  - Vercel MCP:
    - Tools like `vercel.trigger_deploy`, `vercel.get_deploy_status`. [web:182]
  - GoDaddy MCP:
    - Tools like `godaddy.update_dns_record` (if server exists).
- For each tool, register a `ToolDefinition` with:
  - `scope="external"`, `category="integration"`.
  - `is_destructive=True` for write/update/delete operations.
  - `requires_confirmation=True` for mutating operations.

3Ô∏è‚É£ MCP meta-tool for L

- Implement a single meta-tool (e.g., `mcp.call_tool`) that:
  - Validates `server_id` + `tool_name` against a registry of allowed MCP tools.
  - Invokes the MCP client.
  - Logs tool calls via `ToolGraph.log_tool_call`. [file:117]

4Ô∏è‚É£ Attach MCP tools to L

- Ensure L has `HAS_TOOL` edges for:
  - `mcp.call_tool`
  - The curated high-level MCP tools you want L to see by name.

## FINAL VALIDATION

- MCP tools appear in `ToolGraph.get_all_tools()` with correct metadata.
- The meta-tool can successfully call at least one MCP server in your environment (mock or real).
- L is authorized (via `AgentCapabilities`) to use MCP tools for integration tasks, while GMP runs and git commits remain separately gated.

END PROMPT ‚Äî EXECUTE FULLY, THEN STOP.
