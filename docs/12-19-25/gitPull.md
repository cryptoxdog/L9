/opt/l9$ cd /opt/l9 && git stash save "VPS improvements - db envvar + slack DM handling" && git pull

Saved working directory and index state On main: VPS improvements - db envvar + slack DM handling

Updating c1292be..ed3bc4d
Fast-forward
 .dockerignore                                                       |   55 ++
 .gitignore                                                          |   11 +-
 .suite6-config.json                                                 |    8 +-
 L9.code-workspace                                                   |    8 +
 Makefile                                                            |  205 ++++++
 agent/__init__.py                                                   |    2 -
 agents/__init__.py                                                  |    4 +
 agents/l_cto.py                                                     |  372 ++++++++++
 .../calendar_adapter/Module-Spec-v2.6-calendar_adapter.yaml         |  287 ++++++++
 api/adapters/calendar_adapter/README.md                             |  158 +++++
 api/adapters/calendar_adapter/__init__.py                           |   76 ++
 api/adapters/calendar_adapter/adapters/calendar_adapter_adapter.py  |  430 +++++++++++
 api/adapters/calendar_adapter/clients/calendar_adapter_client.py    |  176 +++++
 api/adapters/calendar_adapter/config.py                             |   80 +++
 api/adapters/calendar_adapter/routes/calendar_adapter.py            |  105 +++
 api/adapters/calendar_adapter/schemas.py                            |   77 ++
 api/adapters/calendar_adapter/services/calendar_adapter_service.py  |   88 +++
 api/adapters/calendar_adapter/tests/conftest.py                     |   51 ++
 api/adapters/calendar_adapter/tests/test_calendar_adapter.py        |  251 +++++++
 .../calendar_adapter/tests/test_calendar_adapter_integration.py     |  119 ++++
 api/adapters/email_adapter/Module-Spec-v2.6-email_adapter.yaml      |  271 +++++++
 api/adapters/email_adapter/README.md                                |  155 ++++
 api/adapters/email_adapter/WIRING_LOG.md                            |   93 +++
 api/adapters/email_adapter/__init__.py                              |   76 ++
 api/adapters/email_adapter/adapters/email_adapter_adapter.py        |  430 +++++++++++
 api/adapters/email_adapter/clients/email_adapter_client.py          |  154 ++++
 api/adapters/email_adapter/config.py                                |   79 +++
 api/adapters/email_adapter/routes/email_adapter.py                  |  105 +++
 api/adapters/email_adapter/schemas.py                               |   77 ++
 api/adapters/email_adapter/services/email_adapter_service.py        |   88 +++
 api/adapters/email_adapter/tests/conftest.py                        |   51 ++
 api/adapters/email_adapter/tests/test_email_adapter.py              |  251 +++++++
 api/adapters/email_adapter/tests/test_email_adapter_integration.py  |  119 ++++
 api/adapters/slack_adapter/WIRING_LOG.md                            |  121 ++++
 api/adapters/slack_adapter/__init__.py                              |   77 ++
 api/adapters/slack_adapter/adapters/slack_webhook_adapter.py        |  313 ++++++++
 api/adapters/slack_adapter/clients/slack_webhook_client.py          |  128 ++++
 api/adapters/slack_adapter/config.py                                |   86 +++
 api/adapters/slack_adapter/routes/slack_webhook.py                  |  175 +++++
 api/adapters/slack_adapter/schemas.py                               |   84 +++
 api/adapters/slack_adapter/tests/conftest.py                        |   52 ++
 api/adapters/slack_adapter/tests/test_slack_webhook.py              |  162 +++++
 api/adapters/slack_adapter/tests/test_slack_webhook_integration.py  |  145 ++++
 api/adapters/twilio_adapter/Module-Spec-v2.6-twilio_adapter.yaml    |  272 +++++++
 api/adapters/twilio_adapter/README.md                               |  156 ++++
 api/adapters/twilio_adapter/WIRING_LOG.md                           |   99 +++
 api/adapters/twilio_adapter/__init__.py                             |   76 ++
 api/adapters/twilio_adapter/adapters/twilio_adapter_adapter.py      |  430 +++++++++++
 api/adapters/twilio_adapter/clients/twilio_adapter_client.py        |  154 ++++
 api/adapters/twilio_adapter/config.py                               |   82 +++
 api/adapters/twilio_adapter/routes/twilio_adapter.py                |  105 +++
 api/adapters/twilio_adapter/schemas.py                              |   77 ++
 api/adapters/twilio_adapter/services/twilio_adapter_service.py      |   88 +++
 api/adapters/twilio_adapter/tests/conftest.py                       |   51 ++
 api/adapters/twilio_adapter/tests/test_twilio_adapter.py            |  251 +++++++
 .../twilio_adapter/tests/test_twilio_adapter_integration.py         |  119 ++++
 api/agent_routes.py                                                 |  143 +++-
 api/db.py                                                           |   12 +-
 api/llm.py                                                          |   54 +-
 api/routes/__init__.py                                              |    2 +
 api/routes/factory.py                                               |  393 ++++++++++
 api/routes/slack.py                                                 |  265 +++++++
 api/server.py                                                       |  626 +++++++++++++++-
 api/slack_adapter.py                                                |  291 ++++++++
 api/slack_client.py                                                 |  144 ++++
 agent/agent.py => api/vps_executor.py                               |    2 +-
 api/webhook_slack.py                                                |   24 +-
 archive_perplexity.sh                                               |   87 +++
 archive_perplexity_dryrun.sh                                        |  111 +++
 ci/STRICT_MODE.md                                                   |  100 +++
 ci/__init__.py                                                      |   18 +
 ci/run_ci_gates.sh                                                  |  301 ++++++++
 ci/validate_codegen.py                                              |  491 +++++++++++++
 ci/validate_spec_v25.py                                             |  540 ++++++++++++++
 config/agents/l9-standard-v1.yaml                                   |   82 +++
 config/agents/research-agent-v1.yaml                                |  104 +++
 config/boot_overlay.yaml                                            |   22 +
 config/policies/defaults.yaml                                       |   29 +
 config/policies/tool_usage.yaml                                     |   75 ++
 conftest.py                                                         |   16 +
 core/agents/__init__.py                                             |   50 ++
 core/agents/agent_instance.py                                       |  365 ++++++++++
 core/agents/executor.py                                             |  787 ++++++++++++++++++++
 core/agents/kernel_registry.py                                      |  176 +++++
 core/agents/registry.py                                             |  431 +++++++++++
 core/agents/schemas.py                                              |  322 +++++++++
 core/aios/__init__.py                                               |   19 +
 core/aios/runtime.py                                                |  352 +++++++++
 core/error_tracking.py                                              |  232 ++++++
 core/governance/__init__.py                                         |   39 +
 core/governance/engine.py                                           |  402 +++++++++++
 core/governance/loader.py                                           |  314 ++++++++
 core/governance/schemas.py                                          |  322 +++++++++
 core/kernel_wiring/behavioral_wiring.py                             |    2 +-
 core/kernel_wiring/cognitive_wiring.py                              |    2 +-
 core/kernel_wiring/developer_wiring.py                              |    2 +-
 core/kernel_wiring/execution_wiring.py                              |    2 +-
 core/kernel_wiring/identity_wiring.py                               |    2 +-
 core/kernel_wiring/master_wiring.py                                 |    2 +-
 core/kernel_wiring/memory_wiring.py                                 |    2 +-
 core/kernel_wiring/packet_protocol_wiring.py                        |    2 +-
 core/kernel_wiring/safety_wiring.py                                 |    2 +-
 core/kernel_wiring/worldmodel_wiring.py                             |    2 +-
 core/kernels/__init__.py                                            |   29 +-
 core/kernels/kernel_loader_v3.py                                    |  148 ----
 core/kernels/private_loader.py                                      |  388 ----------
 core/kernels/prompt_builder.py                                      |  265 +++++++
 core/security/__init__.py                                           |   29 +
 core/security/permission_graph.py                                   |  335 +++++++++
 core/tools/__init__.py                                              |   34 +
 core/tools/registry_adapter.py                                      |  598 ++++++++++++++++
 core/tools/tool_graph.py                                            |  416 +++++++++++
 deploy/Dockerfile.memory_api_v1.0.0                                 |   39 +
 deploy/vps-mri.sh                                                   |  379 ++++++++++
 docker-compose.yml                                                  |  142 ----
 docs/L9_TODO.md                                                     |   23 -
 docs/memory/PacketEnvelope.md                                       |  222 ------
 docs/memory/README.md                                               |  359 ----------
 docs/memory_substrate_readme_v1.0.0.md                              |  308 --------
 docs/world_model/README.md                                          |  423 -----------
 env.example                                                         |  118 +++
 generated/specs/config_loader.yaml                                  |  215 ++++++
 l9_private/kernels/00_system/Loading Instructions.md                |  122 ++++
 l9_private/kernels/bootstrap/kernel_manifest.yaml                   |   18 +
 local_dashboard/app.py                                              |  608 ++++++++++++++++
 mac_agent/__init__.py                                               |    4 +-
 memory/WIRING.md                                                    |    4 +
 memory/description.with.diagram.md                                  |    0
 memory/graph_client.py                                              |  521 ++++++++++++++
 memory/ingestion.py                                                 |   78 ++
 memory/migration_runner.py                                          |    4 +
 memory/slack_ingest.py                                              |  493 +++++++++++++
 memory/smoke_test.py                                                |    4 +
 memory/substrate_repository.py                                      |  112 ++-
 memory/substrate_service.py                                         |   57 ++
 orchestrators/action_tool/interface.py                              |    2 +-
 pyproject.toml                                                      |    2 +-
 pytest.ini                                                          |    1 +
 requirements.txt                                                    |   13 +
 requirements_memory_substrate.txt                                   |   34 -
 runtime/Dockerfile                                                  |   40 ++
 runtime/__init__.py                                                 |  100 +++
 runtime/kernel_loader.py                                            |  914 ++++++++++++++++++++++++
 runtime/rate_limiter.py                                             |  287 ++++++++
 runtime/redis_client.py                                             |  390 ++++++++++
 runtime/task_queue.py                                               |  297 ++++++++
 runtime/websocket_orchestrator.py                                   |  195 +++++
 scripts/batch_generate_specs.py                                     |  425 +++++++++++
 scripts/check_env.sh                                                |   95 +++
 scripts/delegate_deep_research.py                                   |  272 +++++++
 scripts/deploy_to_vps.sh                                            |  190 +++++
 scripts/extract_perplexity_pack.py                                  |  180 +++++
 scripts/factory_extract.py                                          |  237 +++++++
 scripts/modules_example.txt                                         |   24 +
 scripts/precommit_docker_smoke.sh                                   |  286 ++++++++
 scripts/rollback_vps.sh                                             |   98 +++
 scripts/run_single_deep_research.py                                 |  121 ++++
 scripts/send_perplexity_spec_request.py                             |  191 +++++
 scripts/test_research_factory.py                                    |   92 +++
 services/research/tools/__init__.py                                 |   21 +-
 services/research/tools/perplexity_client.py                        |  381 ++++++++++
 services/research/tools/tool_registry.py                            |  345 ++++++++-
 services/research/tools/tool_wrappers.py                            |  119 ++--
 services/research_factory/STRICT_MODE.md                            |   99 +++
 services/research_factory/__init__.py                               |  122 ++++
 services/research_factory/extractor.py                              |  650 +++++++++++++++++
 services/research_factory/glue_resolver.py                          |  532 ++++++++++++++
 services/research_factory/run_ci_gates.sh                           |  300 ++++++++
 services/research_factory/schema_parser.py                          |  561 +++++++++++++++
 services/research_factory/schema_validator.py                       |  543 ++++++++++++++
 services/research_factory/templates/README.md.j2                    |  179 +++++
 services/research_factory/templates/__init__.py                     |   21 +
 services/research_factory/templates/__init__.py.j2                  |   33 +
 services/research_factory/templates/controller.py.j2                |  320 +++++++++
 services/research_factory/templates/test_agent.py.j2                |  284 ++++++++
 services/research_factory/validate_codegen.py                       |  490 +++++++++++++
 services/research_factory/validate_spec_v25.py                      |  526 ++++++++++++++
 specs/MODULE_REGISTRY.yaml                                          |  128 ++++
 start_local.sh                                                      |   69 ++
 stop_local.sh                                                       |   22 +
 terminal-output.md                                                  |  101 +++
 tests/conftest.py                                                   |    8 +-
 tests/core/agents/__init__.py                                       |    2 +
 tests/core/agents/test_executor.py                                  | 1102 +++++++++++++++++++++++++++++
 tests/core/governance/__init__.py                                   |    1 +
 tests/core/governance/test_engine.py                                |  642 +++++++++++++++++
 tests/docker/__init__.py                                            |    2 +
 tests/docker/test_env_validation.py                                 |  163 +++++
 tests/docker/test_migrations.py                                     |  209 ++++++
 tests/docker/test_stack_smoke.py                                    |  327 +++++++++
 tests/integration/test_kernel_router_orchestrator_end_to_end.py     |    2 +-
 tests/services/research_factory/__init__.py                         |    4 +
 tests/services/research_factory/test_extraction.py                  |  767 ++++++++++++++++++++
 tests/test_imports.py                                               |  156 ++++
 tests/test_l_cto_kernel_activation.py                               |  221 ++++++
 tests/test_slack_adapter.py                                         |  291 ++++++++
 world_model/repository.py                                           |    7 +-
 197 files changed, 34117 insertions(+), 2192 deletions(-)
 create mode 100644 .dockerignore
 create mode 100644 L9.code-workspace
 create mode 100644 Makefile
 delete mode 100644 agent/__init__.py
 create mode 100644 agents/l_cto.py
 create mode 100644 api/adapters/calendar_adapter/Module-Spec-v2.6-calendar_adapter.yaml
 create mode 100644 api/adapters/calendar_adapter/README.md
 create mode 100644 api/adapters/calendar_adapter/__init__.py
 create mode 100644 api/adapters/calendar_adapter/adapters/calendar_adapter_adapter.py
 create mode 100644 api/adapters/calendar_adapter/clients/calendar_adapter_client.py
 create mode 100644 api/adapters/calendar_adapter/config.py
 create mode 100644 api/adapters/calendar_adapter/routes/calendar_adapter.py
 create mode 100644 api/adapters/calendar_adapter/schemas.py
 create mode 100644 api/adapters/calendar_adapter/services/calendar_adapter_service.py
 create mode 100644 api/adapters/calendar_adapter/tests/conftest.py
 create mode 100644 api/adapters/calendar_adapter/tests/test_calendar_adapter.py
 create mode 100644 api/adapters/calendar_adapter/tests/test_calendar_adapter_integration.py
 create mode 100644 api/adapters/email_adapter/Module-Spec-v2.6-email_adapter.yaml
 create mode 100644 api/adapters/email_adapter/README.md
 create mode 100644 api/adapters/email_adapter/WIRING_LOG.md
 create mode 100644 api/adapters/email_adapter/__init__.py
 create mode 100644 api/adapters/email_adapter/adapters/email_adapter_adapter.py
 create mode 100644 api/adapters/email_adapter/clients/email_adapter_client.py
 create mode 100644 api/adapters/email_adapter/config.py
 create mode 100644 api/adapters/email_adapter/routes/email_adapter.py
 create mode 100644 api/adapters/email_adapter/schemas.py
 create mode 100644 api/adapters/email_adapter/services/email_adapter_service.py
 create mode 100644 api/adapters/email_adapter/tests/conftest.py
 create mode 100644 api/adapters/email_adapter/tests/test_email_adapter.py
 create mode 100644 api/adapters/email_adapter/tests/test_email_adapter_integration.py
 create mode 100644 api/adapters/slack_adapter/WIRING_LOG.md
 create mode 100644 api/adapters/slack_adapter/__init__.py
 create mode 100644 api/adapters/slack_adapter/adapters/slack_webhook_adapter.py
 create mode 100644 api/adapters/slack_adapter/clients/slack_webhook_client.py
 create mode 100644 api/adapters/slack_adapter/config.py
 create mode 100644 api/adapters/slack_adapter/routes/slack_webhook.py
 create mode 100644 api/adapters/slack_adapter/schemas.py
 create mode 100644 api/adapters/slack_adapter/tests/conftest.py
 create mode 100644 api/adapters/slack_adapter/tests/test_slack_webhook.py
 create mode 100644 api/adapters/slack_adapter/tests/test_slack_webhook_integration.py
 create mode 100644 api/adapters/twilio_adapter/Module-Spec-v2.6-twilio_adapter.yaml
 create mode 100644 api/adapters/twilio_adapter/README.md
 create mode 100644 api/adapters/twilio_adapter/WIRING_LOG.md
 create mode 100644 api/adapters/twilio_adapter/__init__.py
 create mode 100644 api/adapters/twilio_adapter/adapters/twilio_adapter_adapter.py
 create mode 100644 api/adapters/twilio_adapter/clients/twilio_adapter_client.py
 create mode 100644 api/adapters/twilio_adapter/config.py
 create mode 100644 api/adapters/twilio_adapter/routes/twilio_adapter.py
 create mode 100644 api/adapters/twilio_adapter/schemas.py
 create mode 100644 api/adapters/twilio_adapter/services/twilio_adapter_service.py
 create mode 100644 api/adapters/twilio_adapter/tests/conftest.py
 create mode 100644 api/adapters/twilio_adapter/tests/test_twilio_adapter.py
 create mode 100644 api/adapters/twilio_adapter/tests/test_twilio_adapter_integration.py
 create mode 100644 api/routes/__init__.py
 create mode 100644 api/routes/factory.py
 create mode 100644 api/routes/slack.py
 create mode 100644 api/slack_adapter.py
 create mode 100644 api/slack_client.py
 rename agent/agent.py => api/vps_executor.py (99%)
 create mode 100644 archive_perplexity.sh
 create mode 100644 archive_perplexity_dryrun.sh
 create mode 100644 ci/STRICT_MODE.md
 create mode 100644 ci/__init__.py
 create mode 100644 ci/run_ci_gates.sh
 create mode 100644 ci/validate_codegen.py
 create mode 100644 ci/validate_spec_v25.py
 create mode 100644 config/agents/l9-standard-v1.yaml
 create mode 100644 config/agents/research-agent-v1.yaml
 create mode 100644 config/boot_overlay.yaml
 create mode 100644 config/policies/defaults.yaml
 create mode 100644 config/policies/tool_usage.yaml
 create mode 100644 conftest.py
 create mode 100644 core/agents/__init__.py
 create mode 100644 core/agents/agent_instance.py
 create mode 100644 core/agents/executor.py
 create mode 100644 core/agents/kernel_registry.py
 create mode 100644 core/agents/registry.py
 create mode 100644 core/agents/schemas.py
 create mode 100644 core/aios/__init__.py
 create mode 100644 core/aios/runtime.py
 create mode 100644 core/error_tracking.py
 create mode 100644 core/governance/__init__.py
 create mode 100644 core/governance/engine.py
 create mode 100644 core/governance/loader.py
 create mode 100644 core/governance/schemas.py
 delete mode 100644 core/kernels/kernel_loader_v3.py
 delete mode 100644 core/kernels/private_loader.py
 create mode 100644 core/kernels/prompt_builder.py
 create mode 100644 core/security/__init__.py
 create mode 100644 core/security/permission_graph.py
 create mode 100644 core/tools/__init__.py
 create mode 100644 core/tools/registry_adapter.py
 create mode 100644 core/tools/tool_graph.py
 create mode 100644 deploy/Dockerfile.memory_api_v1.0.0
 create mode 100755 deploy/vps-mri.sh
 delete mode 100644 docker-compose.yml
 delete mode 100644 docs/L9_TODO.md
 delete mode 100644 docs/memory/PacketEnvelope.md
 delete mode 100644 docs/memory/README.md
 delete mode 100644 docs/memory_substrate_readme_v1.0.0.md
 delete mode 100644 docs/world_model/README.md
 create mode 100644 env.example
 create mode 100644 generated/specs/config_loader.yaml
 create mode 100644 l9_private/kernels/00_system/Loading Instructions.md
 create mode 100644 l9_private/kernels/bootstrap/kernel_manifest.yaml
 create mode 100644 local_dashboard/app.py
 create mode 100644 memory/description.with.diagram.md
 create mode 100644 memory/graph_client.py
 create mode 100644 memory/slack_ingest.py
 delete mode 100644 requirements_memory_substrate.txt
 create mode 100644 runtime/Dockerfile
 create mode 100644 runtime/__init__.py
 create mode 100644 runtime/kernel_loader.py
 create mode 100644 runtime/rate_limiter.py
 create mode 100644 runtime/redis_client.py
 create mode 100644 runtime/task_queue.py
 create mode 100644 runtime/websocket_orchestrator.py
 create mode 100755 scripts/batch_generate_specs.py
 create mode 100755 scripts/check_env.sh
 create mode 100755 scripts/delegate_deep_research.py
 create mode 100755 scripts/deploy_to_vps.sh
 create mode 100755 scripts/extract_perplexity_pack.py
 create mode 100755 scripts/factory_extract.py
 create mode 100644 scripts/modules_example.txt
 create mode 100755 scripts/precommit_docker_smoke.sh
 create mode 100755 scripts/rollback_vps.sh
 create mode 100644 scripts/run_single_deep_research.py
 create mode 100644 scripts/send_perplexity_spec_request.py
 create mode 100644 scripts/test_research_factory.py
 create mode 100644 services/research/tools/perplexity_client.py
 create mode 100644 services/research_factory/STRICT_MODE.md
 create mode 100644 services/research_factory/__init__.py
 create mode 100644 services/research_factory/extractor.py
 create mode 100644 services/research_factory/glue_resolver.py
 create mode 100755 services/research_factory/run_ci_gates.sh
 create mode 100644 services/research_factory/schema_parser.py
 create mode 100644 services/research_factory/schema_validator.py
 create mode 100644 services/research_factory/templates/README.md.j2
 create mode 100644 services/research_factory/templates/__init__.py
 create mode 100644 services/research_factory/templates/__init__.py.j2
 create mode 100644 services/research_factory/templates/controller.py.j2
 create mode 100644 services/research_factory/templates/test_agent.py.j2
 create mode 100644 services/research_factory/validate_codegen.py
 create mode 100644 services/research_factory/validate_spec_v25.py
 create mode 100644 specs/MODULE_REGISTRY.yaml
 create mode 100755 start_local.sh
 create mode 100755 stop_local.sh
 create mode 100644 terminal-output.md
 create mode 100644 tests/core/agents/__init__.py
 create mode 100644 tests/core/agents/test_executor.py
 create mode 100644 tests/core/governance/__init__.py
 create mode 100644 tests/core/governance/test_engine.py
 create mode 100644 tests/docker/__init__.py
 create mode 100644 tests/docker/test_env_validation.py
 create mode 100644 tests/docker/test_migrations.py
 create mode 100644 tests/docker/test_stack_smoke.py
 create mode 100644 tests/services/research_factory/__init__.py
 create mode 100644 tests/services/research_factory/test_extraction.py
 create mode 100644 tests/test_imports.py
 create mode 100644 tests/test_l_cto_kernel_activation.py
 create mode 100644 tests/test_slack_adapter.py
