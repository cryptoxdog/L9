# GMP-2 ‚Äî Register Core Internal Tools for L (Memory, World Model, Mac Agent, GMP)

You are C (Cursor) operating inside the L9 repository.

You are not inventing new tools.
You are wiring existing internal capabilities into the ToolGraph and capability model for agent L.

## üéØ OBJECTIVE (LOCKED)

Make L‚Äôs **internal tools** explicit and auditable:

1. Register key tools in `ToolGraph` with full metadata.
2. Attach them to L via `HAS_TOOL` relationships.
3. Respect the rule: **GMP runs and git commits require Igor‚Äôs explicit approval.**

## üß± SCOPE (FILES ONLY)

You MAY modify:

- `tool_graph.py`
- Any Python module responsible for tool registration / startup wiring (e.g., `registry.py`, `agent_instance.py`, or equivalent where tools are registered).

You MAY NOT:

- Change the semantics of the tools themselves (no new behavior).
- Touch non-`.py` files.

## REQUIRED TOOL REGISTRATIONS

For each tool, create a `ToolDefinition` and call `ToolGraph.register_tool` at startup with:

- `agent_id="L"`
- Correct `category`, `scope`, `is_destructive`, `requires_confirmation`, `external_apis`.

Tools:

1Ô∏è‚É£ Memory & World Model

- `memory_read` / `memory_search`:
  - `category="memory"`, `scope="internal"`, `is_destructive=False`, `requires_confirmation=False`.
- `memory_write`:
  - `category="memory"`, `scope="internal"`, `is_destructive=True`, `requires_confirmation=False` (writes are allowed but tracked).
- `world_model_query` / `kernel_read`:
  - `category="knowledge"`, `scope="internal"`, `is_destructive=False`.

2Ô∏è‚É£ Mac Agent & Diagnostics

- `mac_agent.exec_task` (backed by `vps_executor.py`):
  - `category="execution"`, `scope="internal"`, `is_destructive=True`, `requires_confirmation=True`. [file:132]

3Ô∏è‚É£ GMP Execution (God Mode Prompt)

- `gmp_run`:
  - `category="execution"`, `scope="internal"`, `is_destructive=True`, `requires_confirmation=True`.
  - Encode in metadata and/or capabilities that:
    - It **always** requires Igor‚Äôs explicit approval before execution.
  - `external_apis=["Cursor"]`.

4Ô∏è‚É£ Git Commit

- `git_commit` (even if not yet implemented as a separate tool):
  - Define a placeholder ToolDefinition for future implementation:
    - `category="execution"`, `scope="internal"`, `is_destructive=True`, `requires_confirmation=True`.

## STARTUP WIRING

- Identify the initialization path where agents/tools are registered (e.g., in `registry.py` or `agent_instance.py`).
- Ensure:
  - On startup, L‚Äôs capability profile (from GMP-1) and these ToolDefinitions are registered into Neo4j via `ToolGraph.register_tool`. [file:117][file:143]
  - Failures in Neo4j registration are logged but non-fatal (existing behavior).

## FINAL VALIDATION

- Tools appear in `ToolGraph.get_all_tools()` with correct attributes. [file:117]
- L has `HAS_TOOL` relationships for the tools above.
- No new external imports or side effects beyond registration.

END PROMPT ‚Äî EXECUTE FULLY, THEN STOP.
