# L9 Universal Schema Extractor - Glue Layer v6.0
# ================================================
#
# Defines how agents wire together without modifying individual schemas.
# This is the interconnection layer that enables multi-agent extraction.
#
# Version: 6.0.0

---
# Agent Wirings
# Each wiring defines a connection from one agent to another
wirings:
  # Main Agent -> TensorAIOS (scoring and embeddings)
  - from_agent: MainOrchestrator
    to_agent: TensorAIOS
    connection_type: api_call
    import_path: L9/core/tensoraios/tensor_scorer.py
    method_names:
      - score_candidates
      - generate_embeddings
      - detect_anomaly

  # Domain Adapter -> Main Agent (transaction routing)
  - from_agent: ExampleDomainAdapter
    to_agent: MainOrchestrator
    connection_type: packet_send
    import_path: L9/agents/main/packet_router.py
    packet_types:
      - transaction_batch
      - query
      - feedback

  # Main Agent -> World Model (context enrichment)
  - from_agent: MainOrchestrator
    to_agent: WorldModel
    connection_type: api_call
    import_path: L9/worldmodel/context_provider.py
    method_names:
      - get_causal_context
      - get_temporal_patterns
      - get_market_conditions

  # TensorAIOS -> Tensor Auditor (compliance monitoring)
  - from_agent: TensorAIOS
    to_agent: TensorAuditor
    connection_type: event_observe
    import_path: L9/governance/tensor_auditor/event_subscriber.py
    event_subscriptions:
      - model_loaded
      - inference_called
      - anomaly_flagged
      - drift_detected

  # Main Agent -> Governance Engine (policy checks)
  - from_agent: MainOrchestrator
    to_agent: GovernanceEngine
    connection_type: api_call
    import_path: L9/governance/policy_engine.py
    method_names:
      - check_policy
      - request_approval
      - log_decision

# Memory Harmonization
# Shared memory backends across all agents
memory_harmonization:
  shared_backends:
    redis: redis://l9-redis:6379
    postgres: postgresql://l9-db:5432/l9
    neo4j: neo4j+s://l9-aura:7687
    hypergraph: http://l9-hypergraph:8080
    s3: s3://l9-archive

# Governance Harmonization
# Shared governance configuration
governance_harmonization:
  anchors:
    - Igor
    - Domain Oversight Council
    - Compliance Officer
  shared_escalation_triggers:
    - confidence_drop_below_threshold
    - governance_override_requested
    - memory_sync_failure
    - inference_latency_spike
    - model_drift_detected
    - cross_domain_conflict

# Communication Harmonization
# Shared communication protocols
communication_harmonization:
  protocol: PacketEnvelope
  protocol_path: L9/core/packetprotocol.py
  auth: JWT tokens + role_based_access
  encryption: TLS 1.3
  retry_policy:
    max_retries: 3
    backoff_multiplier: 2
    initial_delay_ms: 100

